<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  body{
    background-color: #000027;
  }
  h1{
    color: #E4F1FF;
  }
</style>
<body>
  <h1>Asincronia en Javascript</h1>
  <script>
    // console.log("Inicio");
    // setTimeout(() => {
    //   console.log("Ejecutando setTimeout");
    // }, 3000);

    // setInterval(() => {
    //   console.log("Ejecutando setInterval cada segundo");
    // }, 1000);

    // let temporizador = setTimeout(() => {
    //   console.log(new Date().toLocaleTimeString());
    // }, 1000);

    // clearTimeout(temporizador)




    // Codigo sincrono bloqueante
    // (() => {
    //   console.log("Codigo sincrono");
    //   console.log("Inicio");

    //   function dos(){
    //     console.log("Dos");
    //   }

    //   function uno(){
    //     console.log("Uno");
    //     dos()
    //     console.log("Tres");
    //   }

    //   uno()
    //   console.log("Fin");
    // })()

    // // Codigo asincrono no bloqueante
    // (() => {
    //   console.log("Codigo asincrono");
    //   console.log("Inicio");

    //   function dos(){
    //     setTimeout(function() {
    //       console.log("Dos");
    //     }, 1000);
    //   }

    //   function uno(){
    //     setTimeout(function() {
    //       console.log("Uno");
    //     }, 1000);
    //     dos()
    //     console.log("Tres");
    //   }

    //   uno()
    //   console.log("Fin");
    // })()





    // function cuadradoCallback(value, callback){
    //   setTimeout(() => {
    //     callback(value, value * value)
    //   }, 0 | Math.random() * 100);
    // }

    // cuadradoCallback(0, (value, result) => {
    //   console.log("inicia callback");      
    //   console.log(`Callback: ${value}, ${result}`);
    //   cuadradoCallback(1, (value, result) => {
    //     console.log(`Callback: ${value}, ${result}`);
    //     cuadradoCallback(2, (value, result) => {
    //       console.log(`Callback: ${value}, ${result}`);
    //       cuadradoCallback(3, (value, result) => {
    //         console.log(`Callback: ${value}, ${result}`);
    //         cuadradoCallback(4, (value, result) => {
    //           console.log(`Callback: ${value}, ${result}`);
    //           cuadradoCallback(5, (value, result) => {
    //             console.log(`Callback: ${value}, ${result}`);
    //           })
    //         })
    //       })
    //     })
    //   })
    // })





    // function cuadradoPromise(value){
    //   if(typeof value !== 'number') return Promise.reject({'message': 'error', 'messageType': 'red'})

    //   return new Promise((resolve, reject) => {
    //     setTimeout(() => {
    //       resolve({
    //         value,
    //         result: value * value
    //       })
    //     }, 0 | Math.random() * 1000);
    //   })
    // }

    // cuadradoPromise(0)
    //   .then(obj => {
    //     console.log("inicia promise");
    //     console.log(`Promise ${obj.value}, ${obj.result}`);
    //     return cuadradoPromise(1)
    //   })
    //   .then(obj => {
    //     console.log(`Promise ${obj.value}, ${obj.result}`);
    //     return cuadradoPromise(2)
    //   })
    //   .then(obj => {
    //     console.log(`Promise ${obj.value}, ${obj.result}`);
    //     return cuadradoPromise(3)
    //   })
    //   .then(obj => {
    //     console.log(`Promise ${obj.value}, ${obj.result}`);
    //     return cuadradoPromise('4')
    //   })
    //   .then(obj => {
    //     console.log(`Promise ${obj.value}, ${obj.result}`);
    //     return cuadradoPromise(5)
    //   })
    //   .then(obj => {
    //     console.log(`Promise ${obj.value}, ${obj.result}`);
    //     console.log("fin promise");
    //   })
    //   .catch(err => console.error(err));




  function cuadradoPromise(value){
    if(typeof value !== 'number') return Promise.reject({'message': 'error', 'messageType': 'red'})

    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve({
          value,
          result: value * value
        })
      }, 0 | Math.random() * 1000);
    })
  }

  async function funcionAsincronaDeclarada(){
    try {
      console.log('Inicio Async Function Declarada');

      let obj = await cuadradoPromise(0)
      console.log("Async function", obj);

      obj = await cuadradoPromise(1)
      console.log("Async function", obj);

      obj = await cuadradoPromise(2)
      console.log("Async function", obj);

      obj = await cuadradoPromise(3)
      console.log("Async function", obj);

      obj = await cuadradoPromise(4)
      console.log("Async function", obj);

      obj = await cuadradoPromise(5)
      console.log("Async function", obj);

      console.log("fin de async function declarada");
    } catch (err) {
      console.error(err);
    }
  }

  funcionAsincronaDeclarada()

  const funcionAsincronaExpresada = async () => {
    try {
      console.log('Inicio Async Function Expresada');

      let obj = await cuadradoPromise(6)
      console.log("Async function", obj);

      obj = await cuadradoPromise(7)
      console.log("Async function", obj);

      obj = await cuadradoPromise(8)
      console.log("Async function", obj);

      obj = await cuadradoPromise(9)
      console.log("Async function", obj);

      obj = await cuadradoPromise(10)
      console.log("Async function", obj);

      console.log("fin de async function expresada");
    } catch (err) {
      console.error(err);
    }
  }

  funcionAsincronaExpresada()

    // fetch('https://jsonplaceholder.typicode.com/toos/1')
    //   .then(response => {
    //     if(!response.ok){
    //       return Promise.reject('La api no esta bbn escrita')
    //     }
    //   }
    //   )
    //   .then(response => response.json())
    //   .then(json => console.log(json))
    //   .catch(err => console.log("AKI", err))

    // const getUser = async () => {
    //   const response = await(fetch('https://jsonplaceholder.typicode.com/todos/1'))
    //   const responseJSON = await response.json()
    //   console.log(responseJSON);
    // }
    
  </script>
  <!-- <button onclick="getUser()">LOAD</button> -->
</body>
</html>